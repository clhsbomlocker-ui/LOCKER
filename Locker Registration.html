<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Locker Registration</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body { font-family:'Segoe UI',sans-serif; background:#f1f3f4; padding:30px; }
    .notice, form { background:#fff; padding:20px; border-radius:12px; max-width:700px; margin:auto; box-shadow:0 4px 10px rgba(0,0,0,0.1); line-height:1.6; }
    .notice { margin-bottom:30px; }
    .notice h2 { margin-top:0; color:#1a73e8; }
    h1 { text-align:center; }
    label { display:block; margin-top:12px; font-weight:600; }
    input { width:100%; padding:10px; margin-top:5px; border:1px solid #ccc; border-radius:6px; }
    button { margin-top:20px; background:#1a73e8; color:#fff; border:none; padding:10px 20px; border-radius:6px; cursor:pointer; }
    button:hover { background:#1765c1; }
  </style>
</head>
<body>
  <div class="notice">
    <h2>📢 储物柜租借事宜 Locker Rental Notice</h2>
    <h3>中文版</h3>
    <p>致：全体同学</p>
    <p><strong>储物柜租借事宜</strong></p>
    <p>级长团将于 <strong>3/3（星期一）至 5/3（星期三）</strong> 进行储物柜租借手续。</p>
    <p><strong>有兴趣租借储物柜的同学</strong> 请准备：</p>
    <blockquote>• RM30（租金）<br>• 填妥的申请表格<br>• 自备的锁头及钥匙</blockquote>
    <p>2. 执委将到各班带领同学前往报名处，请耐心等待指示。</p>
    <p>3. 联络：谢朝晋 3SK2（📞 012-578 4699）</p>
    <hr>
    <h3>English Version</h3>
    <p><strong>Locker rental registration</strong> will be handled from <strong>3rd–5th March</strong>.</p>
    <p><strong>Bring:</strong> RM30 fee, completed form, a padlock with keys.</p>
  </div>

  <h1>Locker Registration</h1>
  <form id="registrationForm" autocomplete="off">
    <label>Name (English)</label>
    <input type="text" name="name_en" required>
    <label>Name (Chinese)</label>
    <input type="text" name="name_cn" required>
    <label>Class</label>
    <input type="text" name="class" required>
    <label>School Number</label>
    <input type="text" name="school_no" required>
    <label>Contact Number</label>
    <input type="tel" name="contact" pattern="[0-9]{8,12}" required>
    <label>Email Address</label>
    <input type="email" name="email" required>
    <button type="submit">Register</button>
  </form>

  <script>
    const KEY_REGISTERED = 'registeredStudents';

    document.getElementById("registrationForm").addEventListener("submit", function(e) {
      e.preventDefault();
      const data = {
        name_en: this.name_en.value.trim(),
        name_cn: this.name_cn.value.trim(),
        class:   this.class.value.trim(),
        school_no: this.school_no.value.trim().toUpperCase(),
        contact: this.contact.value.trim(),
        email:   this.email.value.trim(),
        created_at: Date.now()
      };
      if (!data.school_no) { alert("School Number required."); return; }

      const reg = JSON.parse(localStorage.getItem(KEY_REGISTERED)) || [];
      if (reg.some(s => (s.school_no||'').toUpperCase() === data.school_no)) {
        alert("This School Number has already registered.");
        return;
      }
      reg.push(data);
      localStorage.setItem(KEY_REGISTERED, JSON.stringify(reg));
      alert("Registration submitted! Please wait for further information.");
      this.reset();
    });
  </script>
</body>
</html>
